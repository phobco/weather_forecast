# NATS Server Configuration

# Basic Settings
port: 4222
http_port: 8222

# JetStream
jetstream {
    store_dir: /nats/jetstream
}

# Authentication
authorization {
    # Default permissions for all users
    default_permissions = {
        publish = {
            deny = ["admin.*", "system.*"]
        }
        subscribe = {
            deny = ["admin.*", "system.*"]
        }
    }

    # Users
    users = [
        {
            user: "admin"
            password: $NATS_ADMIN_PASSWORD
            permissions = {
                publish = [">"]
                subscribe = [">"]
            }
        },
        {
            user: "weather_fetcher"
            password: $NATS_FETCHER_PASSWORD
            permissions = {
                publish = ["weather.>", "$JS.API.>", "_INBOX.>"]
                subscribe = ["weather.>", "$JS.API.>", "_INBOX.>"]
            }
        },
        {
            user: "weather_web"
            password: $NATS_WEB_PASSWORD
            permissions = {
                publish = ["_INBOX.>", "$JS.API.>"]
                subscribe = ["weather.>", "_INBOX.>", "$JS.API.>"]
            }
        }
    ]
}
